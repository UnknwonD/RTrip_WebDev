{% extends 'main_head_content.html' %}

{% block content %}

<div class="main-wrapper">
    <div class="main-card" style="max-width: 1200px;">
        <h2 class="form-title">ğŸŒ R-Trip ì—¬í–‰ ì¶”ì²œ ì…ë ¥</h2>
        <form method="POST" action="{{ url_for('main') }}">

            <div class="form-group"> 
            {% set labels = [
                'ìì—° vs ë„ì‹œ',
                'ìˆ™ë°• vs ë‹¹ì¼',
                'ìƒˆë¡œìš´ ì§€ì—­ vs ìµìˆ™í•œ ì§€ì—­',
                'í¸í•˜ì§€ë§Œ ë¹„ì‹¼ ìˆ™ì†Œ vs ë¶ˆí¸í•˜ì§€ë§Œ ì €ë ´í•œ ìˆ™ì†Œ',
                'íœ´ì–‘/íœ´ì‹ vs ì²´í—˜í™œë™',
                'ì˜ ì•Œë ¤ì§€ì§€ ì•Šì€ ë°©ë¬¸ì§€ vs ìœ ëª…í•œ ë°©ë¬¸ì§€',
                'ê³„íšì— ë”°ë¥¸ ì—¬í–‰ vs ì¦‰í¥ì  ì—¬í–‰',
                'ì‚¬ì§„ì´¬ì˜ ì¤‘ìš”í•˜ì§€ ì•ŠìŒ vs ì‚¬ì§„ì´¬ì˜ ì¤‘ìš”'
            ] %}
            {% for i in range(1,9) %}            
            <div class="form-step" id="step{{ i }}">

                <!-- ì—¬í–‰ ìŠ¤íƒ€ì¼ ì„ íƒ -->
                <div class="form-group text-center">
                    <h4 class="mb-4">ë‚˜ë§Œì˜ ì—¬í–‰ ìŠ¤íƒ€ì¼{{ i }} / 8</h4>
                    <p><strong>{{ labels[i-1] }}</strong></p>

                        <div class="style-image-row">
                            <!-- ì²« ë²ˆì§¸ ì¹´ë“œ -->
                            <div class="card-wrapper"  onclick="selectStyle({{ i }}, 1)">
                                <div class="card">
                                    <img src="/static/images/register_{{ i }}.jpg" alt="style {{ i }}-1" >
                                    <div class="card-body text-center">
                                        <p>{{ labels[i-1].split(' vs ')[0] }}</p>
                                    </div> 
                                </div>
                            </div>       
                            <!-- ë‘ ë²ˆì§¸ ì¹´ë“œ -->
                            <div class="card-wrapper" onclick="selectStyle({{ i }},7)">
                                <div class="card">
                                    <img src="/static/images/register_{{ i + 1 }}.jpg" alt="style {{ i }}-2" >
                                    <div class="card-body text-center">
                                        <p>{{ labels[i-1].split(' vs ')[1] }}</p>
                                    </div>
                                </div>
                            </div>   
                        </div>
                </div>
                <!-- ìˆ¨ê²¨ì§„ ìŠ¬ë¼ì´ë” ì…ë ¥(From ì œì¶œìš©) -->
                <input type="range" class="hidden-slider" name="TRAVEL_STYL_{{ i }}" id="slider{{ i }}" min="1" max="7" step="1" value="4">
            </div>
            {% endfor %}
            </div>
             <!-- ì„±í–¥ë³„ ì¶”ì²œ + íšŒì›ê°€ì… -->
            <div class="form-step" id="step9">
                <div class="form-group">                    
                    <div class="form-group" id="style-analysis">
                        <!-- ì´ì „ ìŠ¤íƒ€ì¼ì„ ë³´ê³  ì„±í–¥ ë¶„ì„ ì¶”ê°€í•  ê²ƒ -->
                    </div>

                    <div class="text-center mt-4">
                        <div class="btn-group">
                            <!-- ê³„ì •ì´ ìˆëŠ” ê²½ìš° -->
                            <button type="button" class="btn btn-default" data-toggle="modal" data-target="#loginModal">
                            ë¡œê·¸ì¸
                            </button>
                            <!-- ê³„ì •ì´ ì—†ëŠ” ê²½ìš° -->
                             <a href="{{ url_for('main_register') }}" class="btn btn-primary">
                                íšŒì›ê°€ì…
                            </a> 
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>



<style>
    
    .form-title {
        text-align: center;
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 30px;
        color: #333;
    }
    .form-group label {
        font-weight: 600;
        margin-top: 10px;
    }
    .main-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 60px 20px;
        background-color: #f0f2f5;
    }
    .main-card {
        background-color: #ffffff;
        border-radius: 12px;
        padding: 40px;
        width: 100%;
        max-width:600px;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease-in-out;
    }
    .main-card:hover {
        box-shadow: 0 16px 32px rgba(0, 0, 0, 0.15);
    }
    .form-step {
        display: none;
    }
    .form-step.active {
        display: block;
    }
    
    input[type=range].hidden-slider {
        display: none !important;
    }
    .fixed-size-img {
        width: 100%;
        height: 500px;
        object-fit: cover;
    }
    .card-wrapper {
        width: 45%;
        max-width: 350px;
        margin: 10px;
        display: inline-block;
        border-radius: 20px;
        overflow: hidden;
        transition: transform 0.3s ease;
    }
    .card-wrapper:hover {
        transform: translateY(-5px);
    }
    .card {
        border: none;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
    .card img {
        width: 100%;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
    }
    .card-body {
        padding: 15px;
        background-color: #ffffff;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
        font-weight: 500;
        color: #333;
    }
    @media screen and (max-width: 768px) {
        .card-wrapper {
            width: 90%;
        }
    }
    .style-image-row {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap; /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    }
    @media screen and (max-width: 768px) {
        .style-image-row {
            flex-direction: column;
            align-items: center;
        }
    }
</style>

<script>
    let currentStep = 1;

    function showStep(step) {
        document.querySelectorAll('.form-step').forEach((el) => {
            el.classList.remove('active');
        });
        const target = document.getElementById(`step${step}`);
        if (target) {
            target.classList.add('active');
            currentStep = step;
        }
    }

    function nextStep() {
        showStep(currentStep + 1);
    }

    function selectStyle(step, value) {
        document.getElementById(`slider${step}`).value = value;
        nextStep();
    }

    document.addEventListener("DOMContentLoaded", () => {
        showStep(currentStep);
    });

    function analyzeStyles() {
    let summary = "";
    let total = 0;

    for (let i = 1; i <= 8; i++) {
        const val = parseInt(document.getElementById(`slider${i}`).value);
        total += val;
    }

    const avg = total / 8;

    if (avg <= 3) {
        summary = "ğŸ“Œ ë¶„ì„ ê²°ê³¼: ë‹¹ì‹ ì€ ìì—°, íœ´ì‹, ì €ë ´í•œ ìˆ™ì†Œë¥¼ ì„ í˜¸í•˜ëŠ” ì—¬ìœ í˜• ì—¬í–‰ìì…ë‹ˆë‹¤.";
    } else if (avg >= 5) {
        summary = "ğŸ“Œ ë¶„ì„ ê²°ê³¼: ë‹¹ì‹ ì€ ë„ì‹œ, ì²´í—˜, ì¦‰í¥ì ì¸ ì—¬í–‰ì„ ì„ í˜¸í•˜ëŠ” í™œë™í˜• ì—¬í–‰ìì…ë‹ˆë‹¤.";
    } else {
        summary = "ğŸ“Œ ë¶„ì„ ê²°ê³¼: ë‹¹ì‹ ì€ ê· í˜•ì¡íŒ ìŠ¤íƒ€ì¼ì˜ ì—¬í–‰ìì…ë‹ˆë‹¤.";
    }

    document.getElementById("style-analysis").innerHTML = `
        <div class="alert alert-info text-center" style="font-size: 1.1em; font-weight: bold;">
            ${summary}
        </div>
    `;
}

    function showStep(step) {
    document.querySelectorAll('.form-step').forEach((el) => {
        el.classList.remove('active');
    });
    const target = document.getElementById(`step${step}`);
    if (target) {
        target.classList.add('active');
        currentStep = step;

        if (step === 9) {
            analyzeStyles();  // ë¶„ì„ ê²°ê³¼ ì¶œë ¥
        }
    }
}
</script>

{% endblock %}